<!DOCTYPE html>
<html>
<head>
  <title>USLE Soil Loss Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      display: flex;
      flex-wrap: wrap;
    }
    .column {
      flex: 1;
      min-width: 280px;
      padding: 20px;
      box-sizing: border-box;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, select {
      width: 100%;
      padding: 5px;
      margin-top: 5px;
    }
    button {
      margin-top: 15px;
      padding: 10px;
      font-weight: bold;
      width: 100%;
    }
    #result, #factors {
      margin-top: 20px;
      font-size: 1.1em;
      background: #f2f2f2;
      padding: 15px;
      border-radius: 5px;
    }
    h3 {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <!-- Input Column -->
  <div class="column">
    <h2>USLE Soil Loss Calculator</h2>

    <label>Rainfall Erosivity (R):</label>
    <input type="number" id="r" step="any">

    <label>Soil Texture:</label>
    <select id="texture">
      <option value="0.28">Sand</option>
      <option value="0.32">Loamy Sand</option>
      <option value="0.37">Sandy Loam</option>
      <option value="0.35">Loam</option>
      <option value="0.4">Silt Loam</option>
      <option value="0.42">Silt</option>
      <option value="0.3">Sandy Clay Loam</option>
      <option value="0.31">Clay Loam</option>
      <option value="0.33">Silty Clay Loam</option>
      <option value="0.28">Sandy Clay</option>
      <option value="0.27">Silty Clay</option>
      <option value="0.25">Clay</option>
    </select>

    <label>% Organic Matter:</label>
    <input type="number" id="om" step="any" min="0" max="10">

    <label>Slope Length (ft):</label>
    <input type="number" id="slopeLength" step="any">

    <label>Slope Steepness (%):</label>
    <input type="number" id="slopeSteepness" step="any">

    <label>Cover & Management Practice:</label>
    <select id="cover">
      <option value="1.0">Bare Soil (C = 1.0)</option>
      <option value="0.5">Row Crops, Conventional Tillage (C = 0.5)</option>
      <option value="0.3">Row Crops, No-Till (C = 0.3)</option>
      <option value="0.2">Small Grains (C = 0.2)</option>
      <option value="0.01">Established Grass or Pasture (C = 0.01)</option>
      <option value="0.003">Forest (C = 0.003)</option>
      <option value="0.05">Cover Crop (C = 0.05)</option>
      <option value="0.001">Mulched Permanent Cover (C = 0.001)</option>
    </select>

    <label>Support Practice:</label>
    <select id="pFactor">
      <option value="1.0">No Conservation Practice (P = 1.0)</option>
      <option value="0.6">Contour Farming (P = 0.6)</option>
      <option value="0.5">Contour Strip Cropping (P = 0.5)</option>
      <option value="0.3">Terracing (P = 0.3)</option>
      <option value="0.2">Contour + Strip Cropping + Terracing (P = 0.2)</option>
      <option value="0.1">Permanent Vegetative Cover (P = 0.1)</option>
    </select>

    <button onclick="calculateUSLE()">Calculate Soil Loss</button>

    <div id="result"></div>
  </div>

  <!-- Output Column -->
  <div class="column">
    <h3>USLE Factor Breakdown</h3>
    <div id="factors">
      <p><strong>R:</strong> –</p>
      <p><strong>K:</strong> –</p>
      <p><strong>LS:</strong> –</p>
      <p><strong>C:</strong> –</p>
      <p><strong>P:</strong> –</p>
    </div>
  </div>

  <script>
    function calculateUSLE() {
      const R = parseFloat(document.getElementById('r').value);
      const textureK = parseFloat(document.getElementById('texture').value);
      const OM = parseFloat(document.getElementById('om').value);
      const slopeLength = parseFloat(document.getElementById('slopeLength').value);
      const slopeSteepness = parseFloat(document.getElementById('slopeSteepness').value);
      const C = parseFloat(document.getElementById('cover').value);
      const P = parseFloat(document.getElementById('pFactor').value);

      // Adjust K based on organic matter
      const K = textureK - (OM * 0.005);

      // LS calculation
      const m = slopeSteepness < 1 ? 0.2 : slopeSteepness < 3 ? 0.3 : slopeSteepness < 5 ? 0.4 : 0.5;
      const L = Math.pow(slopeLength / 72.6, m);
      const S = slopeSteepness < 9 ? 0.6 + 0.4 * slopeSteepness : 1.5 * slopeSteepness / 100 + 0.5;
      const LS = L * S;

      const A = R * K * LS * C * P;

      // Display result
      document.getElementById('result').innerHTML =
        `<strong>Estimated Soil Loss:</strong> ${A.toFixed(2)} tons/acre/year`;

      // Show factor breakdown
      document.getElementById('factors').innerHTML = `
        <p><strong>R:</strong> ${R.toFixed(2)}</p>
        <p><strong>K:</strong> ${K.toFixed(3)}</p>
        <p><strong>LS:</strong> ${LS.toFixed(3)}</p>
        <p><strong>C:</strong> ${C}</p>
        <p><strong>P:</strong> ${P}</p>
      `;
    }
  </script>

</body>
</html>
